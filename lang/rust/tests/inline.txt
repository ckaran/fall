impl Node {}
impl<'f> ::Debug for Node<'f> { }

FILE
  IMPL_DEF
    IMPL "impl"
    PATH_TYPE
      PATH
        IDENT "Node"
    MEMBERS
      L_CURLY "{"
      R_CURLY "}"
  IMPL_DEF
    IMPL "impl"
    TYPE_PARAMETERS
      L_ANGLE "<"
      LIFETIME_PARAMETER
        LIFETIME "\'f"
      R_ANGLE ">"
    PATH_TYPE
      PATH
        COLONCOLON "::"
        IDENT "Debug"
    FOR "for"
    PATH_TYPE
      PATH
        IDENT "Node"
        TYPE_ARGUMENTS
          L_ANGLE "<"
          LIFETIME "\'f"
          R_ANGLE ">"
    MEMBERS
      L_CURLY "{"
      R_CURLY "}"

----------------------------------------
pub trait T<X> {}

FILE
  TRAIT_DEF
    VISIBILITY
      PUB "pub"
    TRAIT "trait"
    IDENT "T"
    TYPE_PARAMETERS
      L_ANGLE "<"
      TYPE_PARAMETER
        IDENT "X"
      R_ANGLE ">"
    MEMBERS
      L_CURLY "{"
      R_CURLY "}"

----------------------------------------
pub const X: i32 = 0;

FILE
  CONST_DEF
    VISIBILITY
      PUB "pub"
    CONST "const"
    IDENT "X"
    COLON ":"
    PATH_TYPE
      PATH
        IDENT "i32"
    EQ "="
    LITERAL
      NUMBER "0"
    SEMI ";"

----------------------------------------
struct B<'b, C>();

FILE
  STRUCT_DEF
    STRUCT "struct"
    IDENT "B"
    TYPE_PARAMETERS
      L_ANGLE "<"
      LIFETIME_PARAMETER
        LIFETIME "\'b"
      COMMA ","
      TYPE_PARAMETER
        IDENT "C"
      R_ANGLE ">"
    L_PAREN "("
    R_PAREN ")"
    SEMI ";"

----------------------------------------
const C: Foo<Bar> = foo::<'bar, Baz>;

FILE
  CONST_DEF
    CONST "const"
    IDENT "C"
    COLON ":"
    PATH_TYPE
      PATH
        IDENT "Foo"
        TYPE_ARGUMENTS
          L_ANGLE "<"
          PATH_TYPE
            PATH
              IDENT "Bar"
          R_ANGLE ">"
    EQ "="
    PATH_EXPR
      PATH
        IDENT "foo"
        TYPE_ARGUMENTS
          COLONCOLON "::"
          L_ANGLE "<"
          LIFETIME "\'bar"
          COMMA ","
          PATH_TYPE
            PATH
              IDENT "Baz"
          R_ANGLE ">"
    SEMI ";"

----------------------------------------
type T = X<Foo, Bar>;

FILE
  TYPE_DEF
    TYPE "type"
    IDENT "T"
    EQ "="
    PATH_TYPE
      PATH
        IDENT "X"
        TYPE_ARGUMENTS
          L_ANGLE "<"
          PATH_TYPE
            PATH
              IDENT "Foo"
          COMMA ","
          PATH_TYPE
            PATH
              IDENT "Bar"
          R_ANGLE ">"
    SEMI ";"

----------------------------------------
type T = &'static mut X;

FILE
  TYPE_DEF
    TYPE "type"
    IDENT "T"
    EQ "="
    REFERENCE_TYPE
      AMPERSAND "&"
      LIFETIME "\'static"
      MUT "mut"
      PATH_TYPE
        PATH
          IDENT "X"
    SEMI ";"

----------------------------------------
type T = _;

FILE
  TYPE_DEF
    TYPE "type"
    IDENT "T"
    EQ "="
    PLACEHOLDER_TYPE
      UNDERSCORE "_"
    SEMI ";"

----------------------------------------
type T = ();
type T = (A);
type T = (A,);
type T = (A, B);

FILE
  TYPE_DEF
    TYPE "type"
    IDENT "T"
    EQ "="
    UNIT_TYPE
      L_PAREN "("
      R_PAREN ")"
    SEMI ";"
  TYPE_DEF
    TYPE "type"
    IDENT "T"
    EQ "="
    PAREN_TYPE
      L_PAREN "("
      PATH_TYPE
        PATH
          IDENT "A"
      R_PAREN ")"
    SEMI ";"
  TYPE_DEF
    TYPE "type"
    IDENT "T"
    EQ "="
    TUPLE_TYPE
      L_PAREN "("
      PATH_TYPE
        PATH
          IDENT "A"
      COMMA ","
      R_PAREN ")"
    SEMI ";"
  TYPE_DEF
    TYPE "type"
    IDENT "T"
    EQ "="
    TUPLE_TYPE
      L_PAREN "("
      PATH_TYPE
        PATH
          IDENT "A"
      COMMA ","
      PATH_TYPE
        PATH
          IDENT "B"
      R_PAREN ")"
    SEMI ";"

----------------------------------------
type T = [(); 92];
type T = &[()];

FILE
  TYPE_DEF
    TYPE "type"
    IDENT "T"
    EQ "="
    ARRAY_TYPE
      L_BRACK "["
      UNIT_TYPE
        L_PAREN "("
        R_PAREN ")"
      SEMI ";"
      LITERAL
        NUMBER "92"
      R_BRACK "]"
    SEMI ";"
  TYPE_DEF
    TYPE "type"
    IDENT "T"
    EQ "="
    REFERENCE_TYPE
      AMPERSAND "&"
      ARRAY_TYPE
        L_BRACK "["
        UNIT_TYPE
          L_PAREN "("
          R_PAREN ")"
        R_BRACK "]"
    SEMI ";"

----------------------------------------
fn main() { let _ = (); }

FILE
  FN_DEF
    FN "fn"
    IDENT "main"
    L_PAREN "("
    R_PAREN ")"
    BLOCK_EXPR
      L_CURLY "{"
      LET_STMT
        LET "let"
        WILDCARD_PATTERN
          UNDERSCORE "_"
        EQ "="
        UNIT_EXPR
          L_PAREN "("
          R_PAREN ")"
        SEMI ";"
      R_CURLY "}"

----------------------------------------
fn main() { let S(foo, bar) = (); }

FILE
  FN_DEF
    FN "fn"
    IDENT "main"
    L_PAREN "("
    R_PAREN ")"
    BLOCK_EXPR
      L_CURLY "{"
      LET_STMT
        LET "let"
        TUPE_STRUCT_PATTERN
          PATH
            IDENT "S"
          L_PAREN "("
          PATH_PATTERN
            PATH
              IDENT "foo"
          COMMA ","
          PATH_PATTERN
            PATH
              IDENT "bar"
          R_PAREN ")"
        EQ "="
        UNIT_EXPR
          L_PAREN "("
          R_PAREN ")"
        SEMI ";"
      R_CURLY "}"

----------------------------------------
fn main() {
    let foo = ();
    let ref mut bar = 92;
}

FILE
  FN_DEF
    FN "fn"
    IDENT "main"
    L_PAREN "("
    R_PAREN ")"
    BLOCK_EXPR
      L_CURLY "{"
      LET_STMT
        LET "let"
        PATH_PATTERN
          PATH
            IDENT "foo"
        EQ "="
        UNIT_EXPR
          L_PAREN "("
          R_PAREN ")"
        SEMI ";"
      LET_STMT
        LET "let"
        BINDING_PATTERN
          REF "ref"
          MUT "mut"
          IDENT "bar"
        EQ "="
        LITERAL
          NUMBER "92"
        SEMI ";"
      R_CURLY "}"

----------------------------------------
fn main() { let foo::bar = (); }

FILE
  FN_DEF
    FN "fn"
    IDENT "main"
    L_PAREN "("
    R_PAREN ")"
    BLOCK_EXPR
      L_CURLY "{"
      LET_STMT
        LET "let"
        PATH_PATTERN
          PATH
            PATH
              IDENT "foo"
            COLONCOLON "::"
            IDENT "bar"
        EQ "="
        UNIT_EXPR
          L_PAREN "("
          R_PAREN ")"
        SEMI ";"
      R_CURLY "}"

----------------------------------------
fn main() {
  ();
  (1);
  ((1));
  (1,);
}

FILE
  FN_DEF
    FN "fn"
    IDENT "main"
    L_PAREN "("
    R_PAREN ")"
    BLOCK_EXPR
      L_CURLY "{"
      EXPR_STMT
        UNIT_EXPR
          L_PAREN "("
          R_PAREN ")"
        SEMI ";"
      EXPR_STMT
        PAREN_EXPR
          L_PAREN "("
          LITERAL
            NUMBER "1"
          R_PAREN ")"
        SEMI ";"
      EXPR_STMT
        PAREN_EXPR
          L_PAREN "("
          PAREN_EXPR
            L_PAREN "("
            LITERAL
              NUMBER "1"
            R_PAREN ")"
          R_PAREN ")"
        SEMI ";"
      EXPR_STMT
        TUPLE_EXPR
          L_PAREN "("
          LITERAL
            NUMBER "1"
          COMMA ","
          R_PAREN ")"
        SEMI ";"
      R_CURLY "}"

----------------------------------------
fn foo() { 
    |x, y: i32,| 1 + 1;
    move || -> i32 { 92 };
}

FILE
  FN_DEF
    FN "fn"
    IDENT "foo"
    L_PAREN "("
    R_PAREN ")"
    BLOCK_EXPR
      L_CURLY "{"
      EXPR_STMT
        LAMBDA_EXPR
          PIPE "|"
          LAMBDA_VALUE_PARAM
            PATH_PATTERN
              PATH
                IDENT "x"
          COMMA ","
          LAMBDA_VALUE_PARAM
            PATH_PATTERN
              PATH
                IDENT "y"
            COLON ":"
            PATH_TYPE
              PATH
                IDENT "i32"
          COMMA ","
          PIPE "|"
          SUM_EXPR
            LITERAL
              NUMBER "1"
            PLUS "+"
            LITERAL
              NUMBER "1"
        SEMI ";"
      EXPR_STMT
        LAMBDA_EXPR
          MOVE "move"
          PIPE "|"
          PIPE "|"
          THIN_ARROW "->"
          PATH_TYPE
            PATH
              IDENT "i32"
          BLOCK_EXPR
            L_CURLY "{"
            LITERAL
              NUMBER "92"
            R_CURLY "}"
        SEMI ";"
      R_CURLY "}"

----------------------------------------
fn binary_or_lambda_ambiguity() {
    || true || false;
}

FILE
  FN_DEF
    FN "fn"
    IDENT "binary_or_lambda_ambiguity"
    L_PAREN "("
    R_PAREN ")"
    BLOCK_EXPR
      L_CURLY "{"
      EXPR_STMT
        LAMBDA_EXPR
          PIPE "|"
          PIPE "|"
          LOGICAL_OR
            PATH_EXPR
              PATH
                IDENT "true"
            OR "||"
            PATH_EXPR
              PATH
                IDENT "false"
        SEMI ";"
      R_CURLY "}"

----------------------------------------
fn main() { if true { foo } else { bar } }

FILE
  FN_DEF
    FN "fn"
    IDENT "main"
    L_PAREN "("
    R_PAREN ")"
    BLOCK_EXPR
      L_CURLY "{"
      IF_EXPR
        IF "if"
        PATH_EXPR
          PATH
            IDENT "true"
        BLOCK_EXPR
          L_CURLY "{"
          PATH_EXPR
            PATH
              IDENT "foo"
          R_CURLY "}"
        ELSE "else"
        BLOCK_EXPR
          L_CURLY "{"
          PATH_EXPR
            PATH
              IDENT "bar"
          R_CURLY "}"
      R_CURLY "}"

----------------------------------------
fn main() { 'w: while true {} }

FILE
  FN_DEF
    FN "fn"
    IDENT "main"
    L_PAREN "("
    R_PAREN ")"
    BLOCK_EXPR
      L_CURLY "{"
      WHILE_EXPR
        LIFETIME "\'w"
        COLON ":"
        WHILE "while"
        PATH_EXPR
          PATH
            IDENT "true"
        BLOCK_EXPR
          L_CURLY "{"
          R_CURLY "}"
      R_CURLY "}"

----------------------------------------
fn main() {
    if S {};
    if (S {}) {}
    if let Some(x) = foo() {}
}

FILE
  FN_DEF
    FN "fn"
    IDENT "main"
    L_PAREN "("
    R_PAREN ")"
    BLOCK_EXPR
      L_CURLY "{"
      EXPR_STMT
        IF_EXPR
          IF "if"
          PATH_EXPR
            PATH
              IDENT "S"
          BLOCK_EXPR
            L_CURLY "{"
            R_CURLY "}"
      EMPTY_STMT
        SEMI ";"
      EXPR_STMT
        IF_EXPR
          IF "if"
          PAREN_EXPR
            L_PAREN "("
            STRUCT_LITERAL
              PATH
                IDENT "S"
              L_CURLY "{"
              R_CURLY "}"
            R_PAREN ")"
          BLOCK_EXPR
            L_CURLY "{"
            R_CURLY "}"
      IF_EXPR
        IF "if"
        LET "let"
        TUPE_STRUCT_PATTERN
          PATH
            IDENT "Some"
          L_PAREN "("
          PATH_PATTERN
            PATH
              IDENT "x"
          R_PAREN ")"
        EQ "="
        CALL_EXPR
          PATH_EXPR
            PATH
              IDENT "foo"
          L_PAREN "("
          R_PAREN ")"
        BLOCK_EXPR
          L_CURLY "{"
          R_CURLY "}"
      R_CURLY "}"

----------------------------------------
fn main() { 'pool: loop { 92 }}

FILE
  FN_DEF
    FN "fn"
    IDENT "main"
    L_PAREN "("
    R_PAREN ")"
    BLOCK_EXPR
      L_CURLY "{"
      LOOP_EXPR
        LIFETIME "\'pool"
        COLON ":"
        LOOP "loop"
        BLOCK_EXPR
          L_CURLY "{"
          LITERAL
            NUMBER "92"
          R_CURLY "}"
      R_CURLY "}"

----------------------------------------
fn main() { foo.bar::<i32>() }

FILE
  FN_DEF
    FN "fn"
    IDENT "main"
    L_PAREN "("
    R_PAREN ")"
    BLOCK_EXPR
      L_CURLY "{"
      METHOD_CALL_EXPR
        PATH_EXPR
          PATH
            IDENT "foo"
        DOT "."
        IDENT "bar"
        TYPE_ARGUMENTS
          COLONCOLON "::"
          L_ANGLE "<"
          PATH_TYPE
            PATH
              IDENT "i32"
          R_ANGLE ">"
        L_PAREN "("
        R_PAREN ")"
      R_CURLY "}"

----------------------------------------
fn main() { foo() }

FILE
  FN_DEF
    FN "fn"
    IDENT "main"
    L_PAREN "("
    R_PAREN ")"
    BLOCK_EXPR
      L_CURLY "{"
      CALL_EXPR
        PATH_EXPR
          PATH
            IDENT "foo"
        L_PAREN "("
        R_PAREN ")"
      R_CURLY "}"

----------------------------------------
fn main() { x.foo; x.92; }

FILE
  FN_DEF
    FN "fn"
    IDENT "main"
    L_PAREN "("
    R_PAREN ")"
    BLOCK_EXPR
      L_CURLY "{"
      EXPR_STMT
        FIELD_EXPR
          PATH_EXPR
            PATH
              IDENT "x"
          DOT "."
          IDENT "foo"
        SEMI ";"
      EXPR_STMT
        FIELD_EXPR
          PATH_EXPR
            PATH
              IDENT "x"
          DOT "."
          NUMBER "92"
        SEMI ";"
      R_CURLY "}"

----------------------------------------
fn main() { xs[92]; }

FILE
  FN_DEF
    FN "fn"
    IDENT "main"
    L_PAREN "("
    R_PAREN ")"
    BLOCK_EXPR
      L_CURLY "{"
      EXPR_STMT
        INDEX_EXPR
          PATH_EXPR
            PATH
              IDENT "xs"
          L_BRACK "["
          LITERAL
            NUMBER "92"
          R_BRACK "]"
        SEMI ";"
      R_CURLY "}"

----------------------------------------
#[foo, bar(baz), quux = 92] struct Foo;
#[cfg(target_os="linux")] mod bar;

FILE
  STRUCT_DEF
    ATTRIBUTE
      HASH "#"
      L_BRACK "["
      ATTR_VALUE
        IDENT "foo"
      COMMA ","
      ATTR_VALUE
        IDENT "bar"
        L_PAREN "("
        ATTR_VALUE
          IDENT "baz"
        R_PAREN ")"
      COMMA ","
      ATTR_VALUE
        IDENT "quux"
        EQ "="
        LITERAL
          NUMBER "92"
      R_BRACK "]"
    STRUCT "struct"
    IDENT "Foo"
    SEMI ";"
  MOD_DEF
    ATTRIBUTE
      HASH "#"
      L_BRACK "["
      ATTR_VALUE
        IDENT "cfg"
        L_PAREN "("
        ATTR_VALUE
          IDENT "target_os"
          EQ "="
          LITERAL
            STRING "\"linux\""
        R_PAREN ")"
      R_BRACK "]"
    MOD "mod"
    IDENT "bar"
    SEMI ";"

----------------------------------------
